{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Citas Veterinarias</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/listar.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="shortcut icon" href="{% static 'img/LogosPaginas/lista-de-verificacion.png' %}">
</head>
<body>
    <div class="content">
        
        
        <h1>Lista de Citas Veterinarias</h1> 

        <div id="divdeprueba">
            <button type="button" onclick="modoOscuro()"><i class="fa-solid fa-moon"></i></button>
            <i class="fa-solid fa-font"></i>:  
            <button type="button" onclick="tama√±oGrande()"><i class="fa-solid fa-plus"></i></button>                
            <button type="button" onclick="tama√±oPeque√±o()"><i class="fa-solid fa-minus"></i></button>
        </div>
        
        
        
        <p>Bienvenido, <b>{{ user.username }}</b> üêæ</p>
        {% if perms.app.delete_citaveterinaria %}
        <a class="btn btn-primary mb-3" href="{% url 'crear' %}">‚ûï Nueva Cita</a>
                <a href="{% url 'crearservicio' %}" class="btn btn-primary mb-3">‚ûï Crear Servicio</a>
        {% endif %}
        
        
        <table class="table table-hover align-middle">
            <thead>
                <tr>
                    <th>Due√±o</th>
                    <th>Mascota</th>
                    <th>Especie</th>
                    <th>Fecha</th>
                    <th>Hora</th>
                    <th>Servicio</th>
                    <th>Estatus</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                {% for cita in citas %}
                <tr>
                    <td>{{ cita.nombre_due√±o }}</td>
                    <td>{{ cita.nombre_mascota }}</td>
                    <td>{{ cita.especie }}</td>
                    <td>{{ cita.fecha_cita }}</td>
                    <td>{{ cita.hora_cita }}</td>
                    <td>{{ cita.servicio }}</td>
                    <td>
                        {% if cita.estatus_cita == "PENDIETE" %}
                            <span class="estatus pendiente">{{ cita.estatus_cita }}</span>
                        {% elif cita.estatus_cita == "REALIZADA" %}
                            <span class="estatus realizada">{{ cita.estatus_cita }}</span>
                        {% elif cita.estatus_cita == "CANCELADA" %}
                            <span class="estatus cancelada">{{ cita.estatus_cita }}</span>
                        {% else %}
                            <span class="estatus">{{ cita.estatus_cita }}</span>
                        {% endif %}
                    </td>
                    <td>
                        <a href="{% url 'editar' cita.id %}" class="btn btn-sm btn-outline-primary">Editar</a>
                        {% if perms.app.delete_citaveterinaria %}
                        <a href="{% url 'eliminar' cita.id %}" class="btn btn-sm btn-outline-danger">Eliminar</a>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <div class="footer">
            <form method="post" action="{% url 'logout' %}">
                {% csrf_token %}
                <button type="submit" class="btn btn-outline-danger">Cerrar sesi√≥n</button>
            </form>
        </div>
        <script>
           let modooscuro = false;
            function modoOscuro() {
            if (!modooscuro) {
                document.body.style.backgroundImage =  "url('/static/img/FondoListarOscuro.png')";
                document.body.style.color = "white";

                // Contenedor principal
                document.querySelector(".content").style.background = "rgba(30, 30, 30, 0.95)";
                document.querySelector(".content").style.color = "white";
                document.querySelector(".content h1").style.color = "white";
                document.querySelector(".content").style.boxShadow = "0 8px 25px rgba(255, 255, 255, 0.1)";
                document.querySelectorAll("i").forEach(a=>{
                    a.style.color="black"
                })
                // Tabla
                document.querySelector("table").style.backgroundColor = "#1e1e1e";

                // Encabezados
                document.querySelectorAll("th").forEach(th => {
                    th.style.backgroundColor = "#333";
                    th.style.color = "white";
                });

                // Celdas
                document.querySelectorAll("td p").forEach(td => {
                    td.style.color = "white";
                });

                // Botones
                document.querySelectorAll(".btn").forEach(btn => {
                    btn.style.backgroundColor = "#333";
                    btn.style.color = "white";
                    btn.style.border = "1px solid white";
                });

                // Estatus
                document.querySelectorAll(".estatus").forEach(el => {
                    el.style.backgroundColor = "#555";
                    el.style.color = "white";
                    el.style.border = "1px solid #888";
                });
                modooscuro = true;
            } else {
                const all = document.querySelectorAll("*");
                all.forEach(el => el.removeAttribute("style"));
                modooscuro = false;
                }
            }
            function tama√±oGrande () {
                document.body.style.fontSize = "130%"
                
            }
            function tama√±oPeque√±o () {
                document.body.style.fontSize = "100%"
            }
        </script>
    </div>
</body>
</html>
